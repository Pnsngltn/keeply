{% extends "layout.html" %}
{% block title %}
    Manage
{% endblock %}

{% block main %}
<div class="availability-container">
	<h2>Manage Availability</h2>
	<form method="POST" id="availability-form">
		<div>
			<label>Date:</label><br>
			<input type="date" name="date" required>
		</div>
		<div class="mt-3">
			<p><strong>Period:</strong><span id="period-display">-</span></p>
		</div>
		<div>
			<label>Start Time:</label><br>
			<input type="time" id="time_start" name="time_start" required>
			<br><br>
			<label>End Time:</label><br>
			<input type="time" id="time_end" name="time_end" required>
		</div>
		<div class="mt-4">
			<label>Duration (minutes):</label><br>
			<select id="duration" name="duration" disabled required>
				<option value="">Select valid duration</option>
			</select>
		</div>

		<h4 class="mt-4">Preview of Generated Slots</h4>
		<table id="preview-table" border="1" cellpadding="6">
			<thead><tr><th>#</th><th>Start</th><th>End</th></tr></thead>
			<tbody></tbody>
		</table>

		<button class="mt-4" type="submit">Add Timeslot</button>
	</form>

	{% if success %}
		<p style="color:green;">{{ success }}</p>
	{% endif %}

	<h3 class="mt-5">Your Existing Timeslots</h3>
	<table border="1" cellpadding="6">
		<thead>
			<tr>
				<th>Date</th>
				<th>Start</th>
				<th>End</th>
				<th>Duration</th>
				<th>Status</th>
			</tr>
		</thead>
		<tbody>
			{% for slot in slots %}
				<tr>
					<td>{{ slot.date }}</td>
					<td>{{ slot.time_start }}</td>
					<td>{{ slot.time_end }}</td>
					<td>{{ slot.duration }} min</td>
					<td>{{ slot.status }}</td>
				</tr>
			{% else %}
				<tr><td colspan="5">No timeslots yet</td></tr>
			{% endfor %}
		</tbody>
	</table>
</div>

<!-- Link JS file -->
<script src="{{ url_for('static', filename='js/helpers.js') }}"></script>

{% endblock %}
